<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="img/favicon.ico">
        <title>Utilities - Energy Efficiency ETL Documentation</title>
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/fontawesome.min.css" rel="stylesheet">
        <link href="css/brands.min.css" rel="stylesheet">
        <link href="css/solid.min.css" rel="stylesheet">
        <link href="css/v4-font-face.min.css" rel="stylesheet">
        <link href="css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href=".">Energy Efficiency ETL Documentation</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Home</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="index.html" class="dropdown-item">Welcome to Energy Efficiency ETL Documentation</a>
</li>
                                    
<li>
    <a href="framework.html" class="dropdown-item">Framework</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Framework</a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Configs</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="configs/hourly_generation_by_energy_source.html" class="dropdown-item">Hourly Generation</a>
</li>
            
<li>
    <a href="configs/electricity_sales_to_customers.html" class="dropdown-item">Electricity Sales</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Fetch</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="fetch/provider/EIA.html" class="dropdown-item">EIA</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Ingest</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="ingest/provider/xata.html" class="dropdown-item">XATA</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="main.html" class="dropdown-item">Main Logic</a>
</li>
                                    
<li>
    <a href="utils.html" class="dropdown-item active" aria-current="page">Utilities</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a href="data-model/model.html" class="nav-link">Data Model</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Blogs</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="blogs/blog1.html" class="dropdown-item">Electricity to Customers</a>
</li>
                                    
<li>
    <a href="blogs/blog2.html" class="dropdown-item">Wind and Solar Growth</a>
</li>
                                    
<li>
    <a href="blogs/blog3.html" class="dropdown-item">Net Importer to Net Exporter</a>
</li>
                                    
<li>
    <a href="blogs/blog4.html" class="dropdown-item">Energy Consumption by Sector</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Dashboard</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="Dashboard/generation.html" class="dropdown-item">Electricity Generation</a>
</li>
                                    
<li>
    <a href="Dashboard/consumption.html" class="dropdown-item">Electricity Consumption</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="main.html" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="data-model/model.html" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#utilities-documentation" class="nav-link">Utilities Documentation</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#overview" class="nav-link">Overview</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#classes" class="nav-link">Classes</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#conclusion" class="nav-link">Conclusion</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="utilities-documentation"><strong>Utilities Documentation</strong></h1>
<h2 id="overview"><strong>Overview</strong></h2>
<p>The <code>utils.py</code> module provides a set of utility classes that play a pivotal role in the ETL (Extract, Transform, Load) pipeline. It includes functionality to load configuration parameters, apply data preprocessing rules, and facilitate the smooth ingestion of cleaned data. The module ensures that the pipeline can effectively read configuration files and process data according to defined rules, making the overall process more efficient and maintainable.</p>
<hr />
<h2 id="classes"><strong>Classes</strong></h2>
<h3 id="1-configparamsloader">1. <strong>ConfigParamsLoader</strong></h3>
<p>The <code>ConfigParamsLoader</code> class is responsible for loading and managing configuration parameters from a JSON configuration file. These parameters include details about data providers, ingestion targets, and data processing rules.</p>
<h4 id="initialization"><strong>Initialization</strong></h4>
<pre><code class="language-python">def __init__(self, config_path: str):
</code></pre>
<ul>
<li><strong>Parameters</strong>:</li>
<li><code>config_path</code> (<code>str</code>): The path to the JSON configuration file.</li>
<li><strong>Description</strong>: Initializes the <code>ConfigParamsLoader</code> instance with the provided configuration file path. This allows subsequent methods to access and load the configuration parameters.</li>
</ul>
<h4 id="methods"><strong>Methods</strong></h4>
<h5 id="_load_config"><strong>_load_config()</strong></h5>
<pre><code class="language-python">def _load_config(self):
</code></pre>
<ul>
<li><strong>Returns</strong>:</li>
<li><code>dict</code>: The contents of the JSON configuration file.</li>
<li><strong>Description</strong>: This internal method loads the configuration file and returns its contents as a Python dictionary. It is used by other methods to access configuration values.</li>
</ul>
<h5 id="get_provider_name"><strong>get_provider_name()</strong></h5>
<pre><code class="language-python">def get_provider_name(self):
</code></pre>
<ul>
<li><strong>Returns</strong>:</li>
<li><code>str</code>: The name of the data provider specified in the configuration.</li>
<li><strong>Description</strong>: Retrieves the provider name (e.g., <code>"EIA"</code>) from the configuration. This informs the ETL pipeline about which data source to use for fetching the data.</li>
</ul>
<h5 id="get_target"><strong>get_target()</strong></h5>
<pre><code class="language-python">def get_target(self):
</code></pre>
<ul>
<li><strong>Returns</strong>:</li>
<li><code>str</code>: The target for data ingestion specified in the configuration (e.g., <code>"Xata"</code>).</li>
<li><strong>Description</strong>: Fetches the target database or storage solution where the processed data will be ingested.</li>
</ul>
<hr />
<h3 id="2-loadrule">2. <strong>LoadRule</strong></h3>
<p>The <code>LoadRule</code> class is responsible for loading and managing rules related to data preprocessing. This includes symbol replacement and handling null values as defined in the configuration file.</p>
<h4 id="initialization_1"><strong>Initialization</strong></h4>
<pre><code class="language-python">def __init__(self, config_path: str):
</code></pre>
<ul>
<li><strong>Parameters</strong>:</li>
<li><code>config_path</code> (<code>str</code>): The path to the JSON configuration file containing the data processing rules.</li>
<li><strong>Description</strong>: Initializes the <code>LoadRule</code> instance, enabling the class to read and load preprocessing rules from the specified configuration.</li>
</ul>
<h4 id="methods_1"><strong>Methods</strong></h4>
<h5 id="_load_config_1"><strong>_load_config()</strong></h5>
<pre><code class="language-python">def _load_config(self):
</code></pre>
<ul>
<li><strong>Returns</strong>:</li>
<li><code>dict</code>: The contents of the JSON configuration file.</li>
<li><strong>Description</strong>: Loads the JSON configuration file and returns it as a Python dictionary, used to access the rules for data preprocessing.</li>
</ul>
<h5 id="load_symbol_replacement"><strong>load_symbol_replacement()</strong></h5>
<pre><code class="language-python">def load_symbol_replacement(self):
</code></pre>
<ul>
<li><strong>Returns</strong>:</li>
<li><code>dict</code>: The symbol replacement rules specified in the configuration.</li>
<li><strong>Description</strong>: Retrieves the symbol replacement rules defined in the configuration. This includes a list of symbols to be replaced and their corresponding replacements (e.g., replacing <code>"-"</code> with <code>"_"</code>).</li>
</ul>
<h5 id="load_null_value_replacement"><strong>load_null_value_replacement()</strong></h5>
<pre><code class="language-python">def load_null_value_replacement(self):
</code></pre>
<ul>
<li><strong>Returns</strong>:</li>
<li><code>dict</code>: The null value replacement rules specified in the configuration.</li>
<li><strong>Description</strong>: Fetches the rules for replacing null values in the data. This typically specifies what value (e.g., <code>0</code>) should replace <code>null</code> or missing entries in the dataset.</li>
</ul>
<hr />
<h3 id="3-datapreprocessor">3. <strong>DataPreprocessor</strong></h3>
<p>The <code>DataPreprocessor</code> class is responsible for applying the preprocessing rules to the fetched data. This includes replacing specified symbols in column headers and filling null values in the dataset.</p>
<h4 id="initialization_2"><strong>Initialization</strong></h4>
<pre><code class="language-python">def __init__(self, symbol_replacement, null_value_replacement):
</code></pre>
<ul>
<li><strong>Parameters</strong>:</li>
<li><code>symbol_replacement</code> (<code>dict</code>): A dictionary containing the symbol replacement rules.</li>
<li><code>null_value_replacement</code> (<code>dict</code>): A dictionary containing the null value replacement rules.</li>
<li><strong>Description</strong>: Initializes the <code>DataPreprocessor</code> with the necessary symbol and null value replacement rules. This setup ensures that the data cleaning operations will be applied as required.</li>
</ul>
<h4 id="methods_2"><strong>Methods</strong></h4>
<h5 id="replace_symbols"><strong>replace_symbols()</strong></h5>
<pre><code class="language-python">def replace_symbols(self, df):
</code></pre>
<ul>
<li><strong>Parameters</strong>:</li>
<li><code>df</code> (<code>pd.DataFrame</code>): The DataFrame whose column headers will be modified.</li>
<li><strong>Returns</strong>:</li>
<li><code>pd.DataFrame</code>: The DataFrame with modified column headers.</li>
<li><strong>Description</strong>: Iterates over the symbol replacement rules and applies them to the column headers of the provided DataFrame. This method ensures that symbols specified in the configuration (e.g., <code>"-"</code>, <code>"%"</code>, <code>"*"</code>) are replaced with the designated replacements (e.g., <code>"_"</code>).</li>
</ul>
<h5 id="replace_null"><strong>replace_null()</strong></h5>
<pre><code class="language-python">def replace_null(self, df):
</code></pre>
<ul>
<li><strong>Parameters</strong>:</li>
<li><code>df</code> (<code>pd.DataFrame</code>): The DataFrame in which null values will be replaced.</li>
<li><strong>Returns</strong>:</li>
<li><code>pd.DataFrame</code>: The DataFrame with null values replaced.</li>
<li><strong>Description</strong>: Fills null values in the DataFrame with the specified replacement value. This ensures that missing data is handled consistently before the data is ingested into the target system.</li>
</ul>
<hr />
<h2 id="conclusion"><strong>Conclusion</strong></h2>
<p>The <code>utils.py</code> module is a critical part of the ETL pipeline, providing utility classes that facilitate the loading of configuration parameters, managing data preprocessing rules, and applying those rules to data for ingestion. The modular design of the utilities ensures that the ETL process is highly flexible, maintainable, and scalable.</p>
<p>By utilizing the <code>ConfigParamsLoader</code>, <code>LoadRule</code>, and <code>DataPreprocessor</code> classes, the pipeline can adapt to different data sources, ingestion targets, and data preprocessing rules, all while ensuring data consistency and quality before it is ingested into the target system.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = ".",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="js/base.js"></script>
        <script src="search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
