<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Electricity Sales - Energy Efficiency ETL Documentation</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/fontawesome.min.css" rel="stylesheet">
        <link href="../css/brands.min.css" rel="stylesheet">
        <link href="../css/solid.min.css" rel="stylesheet">
        <link href="../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">Energy Efficiency ETL Documentation</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Home</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../index.html" class="dropdown-item">Welcome to Energy Efficiency ETL Documentation</a>
</li>
                                    
<li>
    <a href="../framework.html" class="dropdown-item">Framework</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Framework</a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Configs</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="hourly_generation_by_energy_source.html" class="dropdown-item">Hourly Generation</a>
</li>
            
<li>
    <a href="electricity_sales_to_customers.html" class="dropdown-item active" aria-current="page">Electricity Sales</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Fetch</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../fetch/provider/EIA.html" class="dropdown-item">EIA</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Ingest</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../ingest/provider/xata.html" class="dropdown-item">XATA</a>
</li>
    </ul>
  </li>
                                    
<li>
    <a href="../main.html" class="dropdown-item">Main Logic</a>
</li>
                                    
<li>
    <a href="../utils.html" class="dropdown-item">Utilities</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a href="../data-model/model.html" class="nav-link">Data Model</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Blogs</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../blogs/blog1.html" class="dropdown-item">Electricity to Customers</a>
</li>
                                    
<li>
    <a href="../blogs/blog2.html" class="dropdown-item">Wind and Solar Growth</a>
</li>
                                    
<li>
    <a href="../blogs/blog3.html" class="dropdown-item">Net Importer to Net Exporter</a>
</li>
                                    
<li>
    <a href="../blogs/blog4.html" class="dropdown-item">Energy Consumption by Sector</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Dashboard</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../Dashboard/generation.html" class="dropdown-item">Electricity Generation</a>
</li>
                                    
<li>
    <a href="../Dashboard/consumption.html" class="dropdown-item">Electricity Consumption</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="hourly_generation_by_energy_source.html" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../fetch/provider/EIA.html" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#monthly-retail-sales-data-configuration" class="nav-link">Monthly Retail Sales Data Configuration</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#overview" class="nav-link">Overview</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#configuration-structure" class="nav-link">Configuration Structure</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#conclusion" class="nav-link">Conclusion</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="monthly-retail-sales-data-configuration"><strong>Monthly Retail Sales Data Configuration</strong></h1>
<h2 id="overview"><strong>Overview</strong></h2>
<p>This configuration file is used to fetch monthly retail sales data from the EIA API. It defines details about the data provider, API endpoint, request parameters, and data transformation rules before ingesting the data into the Xata database.</p>
<h2 id="configuration-structure"><strong>Configuration Structure</strong></h2>
<h3 id="providers"><strong>Providers</strong></h3>
<p>The <code>providers</code> section contains all the necessary information to access the EIA API and specify the parameters for fetching retail sales data.</p>
<ul>
<li><strong>provider</strong>:</li>
<li><strong>Type</strong>: <code>string</code></li>
<li>
<p><strong>Description</strong>: Specifies the data provider. In this case, it is set to <code>"EIA"</code>, the U.S. Energy Information Administration.</p>
</li>
<li>
<p><strong>base_url</strong>:</p>
</li>
<li><strong>Type</strong>: <code>string</code></li>
<li><strong>Description</strong>: The base URL for the EIA API endpoint where the retail sales data will be fetched from.</li>
<li>
<p><strong>Example</strong>: <code>https://api.eia.gov/v2/electricity/retail-sales/data/</code></p>
</li>
<li>
<p><strong>params</strong>:</p>
</li>
<li><strong>Type</strong>: <code>object</code></li>
<li><strong>Description</strong>: Contains various parameters for the API request.</li>
</ul>
<h4 id="params-details"><strong>Params Details</strong></h4>
<ul>
<li>
<p><strong>frequency</strong>:</p>
<ul>
<li><strong>Type</strong>: <code>string</code></li>
<li><strong>Description</strong>: The frequency of the data. Here, it is set to <code>"monthly"</code>, indicating monthly retail sales data will be fetched.</li>
</ul>
</li>
<li>
<p><strong>data</strong>:</p>
<ul>
<li><strong>Type</strong>: <code>array</code></li>
<li><strong>Description</strong>: Specifies the fields of data to retrieve.</li>
<li><strong>Example</strong>: <code>["customers", "price", "revenue", "sales"]</code>, which fetches the number of customers, price, revenue, and sales data.</li>
</ul>
</li>
<li>
<p><strong>facets</strong>:</p>
<ul>
<li><strong>Type</strong>: <code>object</code></li>
<li>
<p><strong>Description</strong>: Contains filtering options for the data.</p>
</li>
<li>
<p><strong>sectorid</strong>:</p>
</li>
<li><strong>Type</strong>: <code>array</code></li>
<li><strong>Description</strong>: Specifies the sectors to filter the data by. The array includes sectors like <code>"ALL"</code>, <code>"COM"</code> (Commercial), <code>"RES"</code> (Residential), etc.</li>
<li>
<p><strong>Example</strong>: <code>["ALL", "COM", "IND", "RES", "TRA"]</code>.</p>
</li>
<li>
<p><strong>stateid</strong>:</p>
</li>
<li><strong>Type</strong>: <code>array</code></li>
<li><strong>Description</strong>: Specifies the states for which the data should be fetched. </li>
<li><strong>Example</strong>: <code>["AK", "AL", "AR", "CA", "TX", "NY", "FL", ...]</code>.</li>
</ul>
</li>
<li>
<p><strong>start</strong>:</p>
<ul>
<li><strong>Type</strong>: <code>string</code> or <code>null</code></li>
<li><strong>Description</strong>: The start date for the data fetch. Setting this to <code>null</code> means data will be fetched from the beginning.</li>
</ul>
</li>
<li>
<p><strong>end</strong>:</p>
<ul>
<li><strong>Type</strong>: <code>string</code> or <code>null</code></li>
<li><strong>Description</strong>: The end date for the data fetch. Setting this to <code>null</code> means data will be fetched up to the current date.</li>
</ul>
</li>
<li>
<p><strong>sort</strong>:</p>
<ul>
<li><strong>Type</strong>: <code>array</code></li>
<li><strong>Description</strong>: Specifies the sorting order for the fetched data.</li>
<li><strong>Example</strong>: 
  <code>json
  [
      {"column": "customers", "direction": "asc"},
      {"column": "period", "direction": "asc"},
      {"column": "price", "direction": "asc"},
      {"column": "revenue", "direction": "asc"},
      {"column": "sales", "direction": "asc"},
      {"column": "sectorid", "direction": "asc"},
      {"column": "stateid", "direction": "asc"}
  ]</code>
  This indicates sorting by <code>customers</code>, <code>period</code>, <code>price</code>, <code>revenue</code>, <code>sales</code>, <code>sectorid</code>, and <code>stateid</code> in ascending order.</li>
</ul>
</li>
<li>
<p><strong>offset</strong>:</p>
<ul>
<li><strong>Type</strong>: <code>integer</code></li>
<li><strong>Description</strong>: The offset for pagination. It specifies the starting point for fetching records.</li>
<li><strong>Example</strong>: <code>0</code> means to start fetching records from the beginning.</li>
</ul>
</li>
<li>
<p><strong>length</strong>:</p>
<ul>
<li><strong>Type</strong>: <code>integer</code></li>
<li><strong>Description</strong>: The maximum number of records to fetch in a single request.</li>
<li><strong>Example</strong>: <code>5000</code> indicates that up to 5000 records will be fetched.</li>
</ul>
</li>
</ul>
<h3 id="ingest"><strong>Ingest</strong></h3>
<p>The <code>ingest</code> section defines the target for the data after it is fetched and processed.</p>
<ul>
<li><strong>target</strong>:</li>
<li><strong>Type</strong>: <code>string</code></li>
<li><strong>Description</strong>: Specifies where the data will be ingested.</li>
<li>
<p><strong>Example</strong>: <code>"Xata"</code> indicates that the data will be ingested into the Xata database.</p>
</li>
<li>
<p><strong>table_name</strong>:</p>
</li>
<li><strong>Type</strong>: <code>string</code></li>
<li><strong>Description</strong>: The name of the table in the target database where the data will be stored.</li>
<li><strong>Example</strong>: <code>"electricity_sales_to_customer_raw"</code> specifies the table name.</li>
</ul>
<h3 id="rules"><strong>Rules</strong></h3>
<p>The <code>rules</code> section defines any data transformations that should be applied before the data is ingested.</p>
<ul>
<li><strong>symbol_replacement</strong>:</li>
<li><strong>Type</strong>: <code>object</code></li>
<li>
<p><strong>Description</strong>: Rules for replacing specific symbols or characters in the data.</p>
</li>
<li>
<p><strong>replacements</strong>:</p>
<ul>
<li><strong>Type</strong>: <code>array</code></li>
<li><strong>Description</strong>: Specifies the symbols to replace and their replacements.</li>
<li><strong>Example</strong>:
  <code>json
  [
      {
          "symbols": ["-", "%", "*"],
          "replace_with": "_"
      }
  ]</code>
  This indicates that all occurrences of the symbols <code>"-"</code>, <code>"%"</code>, and <code>"*"</code> will be replaced with underscores (<code>_</code>).</li>
</ul>
</li>
<li>
<p><strong>null_value_replacement</strong>:</p>
</li>
<li><strong>Type</strong>: <code>object</code></li>
<li>
<p><strong>Description</strong>: Specifies how to handle null values in the data.</p>
</li>
<li>
<p><strong>replace_with</strong>:</p>
<ul>
<li><strong>Type</strong>: <code>integer</code></li>
<li><strong>Description</strong>: The value to replace nulls with.</li>
<li><strong>Example</strong>: <code>0</code> indicates that any null values will be replaced with <code>0</code>.</li>
</ul>
</li>
</ul>
<h2 id="conclusion"><strong>Conclusion</strong></h2>
<p>This configuration file provides the necessary structure for fetching, transforming, and ingesting monthly retail sales data by sector and state from the EIA API into the Xata database. The transformation rules ensure that the data is clean and consistent before ingestion.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js"></script>
        <script src="../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
